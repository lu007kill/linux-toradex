// SPDX-License-Identifier: GPL-2.0+ OR X11
/*
 * Copyright 2018-2019 Toradex
 */

/dts-v1/;
//#define IS_A0_SILICON
//#define DSI_TO_HDMI_V10

#include "fsl-imx8qxp-colibri-eval-v3.dtsi"

/ {
	model = "Toradex Colibri iMX8QXP with LT8912 MIPI-DSI 2 HDMI bridge";
	compatible = "toradex,colibri-imx8qxp-dsihdmi-eval-v3", "toradex,colibri-imx8qxp", "fsl,imx8qxp";

};

/* DSI/LVDS port 0 */
&i2c0_mipi_lvds0 {
	#address-cells = <1>;
	#size-cells = <0>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c0_mipi_lvds0>;
	clock-frequency = <100000>;
	status = "okay";

#ifndef DSI_TO_HDMI_V10
	/* DSI to HDMI Adapter V1.1A */
	i2c-switch@70 {
		compatible = "nxp,pca9540";
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <0x70>;
		i2c-mux-idle-disconnect;

		i2c@0 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0>;

			/* DDC/EDID */
		};

		i2c@1 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <1>;

			lt8912@48 {
				compatible = "lontium,lt8912";
				reg = <0x48>;

				port {
					lt8912_1_in: endpoint {
						remote-endpoint = <&mipi_dsi_bridge1_out>;
					};
				};

				display-timings {
					native-mode = <&timing1>;

					timing0: timing0 {
						clock-frequency = <74250000>;
						hactive = <1280>;
						vactive = <720>;
						hfront-porch = <110>;
						hsync-len = <40>;
						hback-porch = <220>;
						vfront-porch = <5>;
						vsync-len = <5>;
						vback-porch = <20>;
						hsync-active = <0>;
						vsync-active = <0>;
						de-active = <0>;
						pixelclk-active = <0>;
					};

					timing1: timing1 {
						clock-frequency = <148500000>;
						hactive = <1920>;
						vactive = <1080>;
						hfront-porch = <88>;
						hsync-len = <44>;
						hback-porch = <148>;
						vfront-porch = <36>;
						vsync-len = <5>;
						vback-porch = <4>;
						hsync-active = <0>;
						vsync-active = <0>;
						de-active = <0>;
						pixelclk-active = <0>;
					};
				};
			};
		};
	};
#else /* DSI_TO_HDMI_V10 */
	/* DSI to HDMI Adapter V1.0A */
	lt8912@48 {
		compatible = "lontium,lt8912";
		reg = <0x48>;

		port {
			lt8912_1_in: endpoint {
				remote-endpoint = <&mipi_dsi_bridge1_out>;
			};
		};

		display-timings {
			native-mode = <&timing1>;

			timing0: timing0 {
				clock-frequency = <74250000>;
				hactive = <1280>;
				vactive = <720>;
				hfront-porch = <110>;
				hsync-len = <40>;
				hback-porch = <220>;
				vfront-porch = <5>;
				vsync-len = <5>;
				vback-porch = <20>;
				hsync-active = <0>;
				vsync-active = <0>;
				de-active = <0>;
				pixelclk-active = <0>;
			};

			timing1: timing1 {
				clock-frequency = <148500000>;
				hactive = <1920>;
				vactive = <1080>;
				hfront-porch = <88>;
				hsync-len = <44>;
				hback-porch = <148>;
				vfront-porch = <36>;
				vsync-len = <5>;
				vback-porch = <4>;
				hsync-active = <0>;
				vsync-active = <0>;
				de-active = <0>;
				pixelclk-active = <0>;
			};
		};
	};
#endif /* DSI_TO_HDMI_V10 */
};

&ldb1_phy {
	status = "disabled";
};

&ldb1 {
	status = "disabled";

	lvds-channel@0 {
		fsl,data-mapping = "jeida";
		fsl,data-width = <24>;
		status = "disabled";
	};
};

&mipi_dsi_phy1 {
	status = "okay";
};

&mipi_dsi1 {
	pwr-delay = <10>;
	status = "okay";
};

&mipi_dsi_bridge1 {
	status = "okay";

	port@1 {
		mipi_dsi_bridge1_out: endpoint {
			remote-endpoint = <&lt8912_1_in>;
		};
	};
};

/* DSI/LVDS port 1 */
&i2c0_mipi_lvds1 {
	#address-cells = <1>;
	#size-cells = <0>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c0_mipi_csi>;
	clock-frequency = <100000>;
	status = "disabled";
};

&ldb2_phy {
	status = "disabled";
};

&ldb2 {
	status = "disabled";
};

&mipi_dsi_phy2 {
	status = "disabled";
};

&mipi_dsi2 {
	pwr-delay = <10>;
	status = "disabled ";
};

&mipi_dsi_bridge2 {
	status = "disabled";
};
